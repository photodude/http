<VirtualHost *:80>
    ServerName %hostname%
    ServerAdmin github@babdev.com

    DocumentRoot %TRAVIS_BUILD_DIR%

    <Directory %TRAVIS_BUILD_DIR%/web>
        DirectoryIndex app.php
        Options -Indexes +FollowSymLinks +SymLinksifOwnerMatch
        AllowOverride All
        Require all granted
    </Directory>

    # Wire up Apache to use Travis CI's php-fpm.
    <IfModule mod_fastcgi.c>
        AddHandler php5-fcgi .php
        Action php5-fcgi /php5-fcgi
        Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi
        FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -host 127.0.0.1:9000 -idle-timeout 1000 -pass-header Authorization

        <Directory /usr/lib/cgi-bin>
            Require all granted
        </Directory>
    </IfModule>

    <IfModule mod_fastcgi.c>
        AddHandler php7-fcgi .php
        Action php7-fcgi /php7-fcgi
        Alias /php7-fcgi /usr/lib/cgi-bin/php7-fcgi
        FastCgiExternalServer /usr/lib/cgi-bin/php7-fcgi -host 127.0.0.1:9000 -idle-timeout 1400 -pass-header Authorization

        <Directory /usr/lib/cgi-bin>
            Require all granted
        </Directory>
    </IfModule>

    <IfModule mod_fastcgi.c>
        AddHandler php71-fcgi-www .php
        Action php71-fcgi-www /php71-fcgi-www
        Alias /php71-fcgi-www /usr/lib/cgi-bin/php71-fcgi-www
        FastCgiExternalServer /usr/lib/cgi-bin/php71-fcgi-www -host 127.0.0.1:9000 -idle-timeout 1800 -pass-header Authorization

        <Directory /usr/lib/cgi-bin>
            Require all granted
        </Directory>
    </IfModule>
</VirtualHost>
